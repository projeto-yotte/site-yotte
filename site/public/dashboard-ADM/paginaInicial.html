<!DOCTYPE html>
<html lang="BR-PT">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../css/visaoGeral.css">
    <link rel="stylesheet" href="../css/paginaInicial.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../js/cadastroADM.js"></script>
    <title>Página Inicial</title>
</head>

<body>
    <!-- PAG MENU -->
    <div class="container">

        <div class="lateral">
            <!-- parte de cima -->
            <div class="listaBaixo">
                <div class="navegacão">

                    <div class="navHeader">
                        <img src="../assets/img/logo.png">
                    </div>
                    <ul>
                        <li class="lista destaque">
                            <a href="">
                                <i class="uil uil-create-dashboard destaque"></i>
                                <span class="lista">Página inical</span>
                            </a>
                        </li>
                        <!-- <li class="lista ">
                            <a href="VisaoGeral.html">
                                <i class="bi bi-graph-up "></i>
                                <i class="bi bi-bar-chart"></i>
                                <span class="lista">Geral</span>
                            </a>
                        </li> -->
                        <li class="lista">
                            <a href="cadastrarUser.html">
                                <i class="bi bi-person-plus-fill"></i>
                                <!-- <i class="bi bi-file-earmark-text"></i> -->
                                <span class="lista">Usuários</span>
                            </a>
                        </li>
                        <li class="lista">
                            <a href="telaLogs.html">
                                <i class="bi bi-clock-history"></i>
                                <!-- <i class="bi bi-gear"></i> -->
                                <span class="lista">Tela de Logs</span>
                            </a>
                        </li>
                        <li class="lista">
                            <a href="" onclick="EncerrarSession()">
                                <i class="bi bi-box-arrow-right"></i>
                                <!-- <i class="bi bi-gear"></i> -->
                                <span class="lista">Sair</span>
                            </a>
                        </li>
                    </ul>
                </div>

            </div>

        </div>
        <!-- FIM DO MENU -->

        <div class="areaDash">

            <div class="topDash">
                <span>Página Inicial</span>
                <div class="nomeNome">
                    <a href="../login.html">
                        <!-- <i class="uil uil-signout"></i> -->
                    </a>

                    <ul class="ul2">
                        <span class="loginUsuario" id="loginUsuario">Nome</span>
                    </ul>
                </div>

            </div>

            <div class="chats-group">
                <div class="container-chart">
                    <span>Usuários Ativos e Inativos</span>
                    <div class="chart">
                        <canvas id="myChart"></canvas>
                    </div>
                </div>

                <div class="KPI">
                    <div class="containerKpi">
                        <span>Colaboradores fora do espediente</span>
                        <div class="caixa">
                            <span class="info" id="nomeMaquina">Maquina YH - 62023</span>
                            <span class="span">Visto por ultimo: <span class="info destaque" id="hora_captura"> h/
                                    ultima captura</span></span>
                            <span class="span">Horas fora do expediente <span class="info destaque" id="hora_captura">
                                    h/</span></span>
                        </div>
                        <div class="caixa">
                            <span class="info" id="nomeMaquina">Maquina YH - 72124
                            </span>
                            <span class="span">Visto por ultimo: <span class="info destaque" id="hora_captura"> h/
                                    ultima captura</span></span>
                            <span class="span">Horas fora do expediente <span class="info destaque" id="hora_captura">
                                    h/</span></span>
                        </div>
                        <div class="caixa">
                            <span class="info" id="nomeMaquina">Maquina YH - 82225
                            </span>
                            <span class="span">Visto por ultimo: <span class="info destaque" id="hora_captura"> h/
                                    ultima captura</span></span>
                            <span class="span">Horas fora do expediente <span class="info destaque" id="hora_captura">
                                    h/</span></span>
                        </div>
                        <div class="caixa">
                            <span class="info" id="nomeMaquina">Maquina YH - 92326
                            </span>
                            <span class="span">Visto por ultimo: <span class="info destaque" id="hora_captura"> h/
                                    ultima captura</span></span>
                            <span class="span">Horas fora do expediente <span class="info destaque" id="hora_captura">
                                    h/ ultima captura</span></span>
                        </div>
                    </div>

                    <!-- <div class="containerKpi2">
                        <span>Janelas usuários</span>
                        <span>Goolgle <span id="infoCpu">10% CPU</span><span id="infoRam"> 2% RAM</span></span>
                        <span id="qtdProcessos" class="qtdProcessos">10 <span
                                class="qtdProcessos">processos</span></span>
                        <span>Goolgle <span id="infoCpu">10% CPU</span><span id="infoRam"> 2% RAM</span></span>
                        <span id="qtdProcessos" class="qtdProcessos">10 <span
                                class="qtdProcessos">processos</span></span>
                    </div> -->
                </div>

                <div class="containerBarHorizont">
                    <div class="containerGraphi">
                        <span>Relatório de problemas</span>
                        <span class="littleInfo">De acordo com hardware</span>
                        <div class="chart2">
                            <canvas id="myChart2"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="chart-bottom">
                <!-- <div class="listaMaquinas">
                    <Span class="titleMaquina">Lista de Máquinas Cadastradas</Span>
                    <a href="dashEspecifica.html">
                        <div class="containerColTittle">
                            <span>Hostname: <span id="idMaquina">Maquina YH - 62023</span></span>
                            <span id="regiao">SP, Brasil</span>
                        </div>
                    </a> -->
                <!-- PRÓXIMA DIV ESTÁ SENDO PREENCHIDA PELO BANCO -->
                <div class="listaMaquinas">
                    <Span class="titleMaquina">Lista de Máquinas Cadastradas</Span>
                    <div class="topLista">
                        <span class="fontRed">Nome do Funcionário</span>
                        <span class="fontRed">Ip</span>
                    </div>
                    <div id="listaMaquinas" class="infoLista"></div>
                </div>
                <div class="containerBarHorizontal">
                    <div class="containerGraphi2">
                        <span>Tempo de inatividade<span class="littleInfo">(últimos 7 dias)</span></span>

                        <span class="littleInfo">Em horas</span>
                        <div class="chart1">
                            <canvas id="myChart3"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

</body>

</html>

<script>
    console.log(sessionStorage.ID_USUARIO)

    const ctx = document.getElementById('myChart');

    new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: ['Ativos', 'Inativos'],
            datasets: [{
                label: '# of Votes',
                data: [55, 45],
                backgroundColor: ['rgba(227, 40, 50)', 'rgba(78, 10, 14)'],
                borderWidth: 1

            }]
        },

    });

    // const ctx = document.getElementById('myChart');

    // new Chart(ctx, {
    //     type: 'bar',
    //     data: {
    //         labels: ['Disco', 'Ram', 'Cpu'],
    //         datasets: [{
    //             label: '# of Votes',
    //             data: [60, 60, 30],
    //             backgroundColor: ['rgba(227, 40, 50)', 'rgba(146, 19, 26)', 'rgba(78, 10, 14)'],
    //             borderWidth: 1
    //         }]
    //     },
    //     options: {
    //         scales: {
    //             y: {
    //                 beginAtZero: true
    //             }
    //         }
    //     }
    // });


    const ctxx = document.getElementById('myChart2');

    new Chart(ctxx, {
        type: 'bar',
        data: {
            labels: ['CPU', 'RAM', 'SO', 'GPU', 'HD', 'SSD', 'REDE'],
            datasets: [{
                axis: 'y',
                label: 'Maquina',
                data: [10, 5, 13, 9, 3, 15, 2],
                backgroundColor: ['rgba(227, 40, 50)', 'rgba(146, 19, 26)', 'rgba(78, 10, 14)'],
                borderWidth: 1
            }]
        },
        options: {
            indexAxis: 'y',
            scales: {
                y: {
                    beginAtZero: true,
                }
            }
        }
    });

    const ctxxx = document.getElementById('myChart3');

    new Chart(ctxxx, {
        type: 'bar',
        data: {
            labels: ['Maquina YH 212', 'Maquina YH 255', 'Maquina B2B 584'],
            datasets: [{
                axis: 'y',
                label: 'Maquina',
                data: [12, 8, 24],
                backgroundColor: ['rgba(227, 40, 50)', 'rgba(146, 19, 26)', 'rgba(78, 10, 14)'],
                borderWidth: 1
            }]
        },
        options: {
            indexAxis: 'y',
            scales: {
                y: {
                    beginAtZero: true,
                }
            }
        }
    });


    window.addEventListener("load", () => {
        listarMaquinas();
    });

    function listarMaquinas() {
        fetch("/maquina", {
            method: "GET",
            headers: {
                "Content-Type": "application/json",
            },
        })
            .then(function (response) {
                if (response.ok) {
                    return response.json();
                }
                throw new Error('Erro ao buscar maquinas');
            })
            .then(function (maquinas) {
                console.log(maquinas);
                const maquinasContainer = document.getElementById('listaMaquinas');

                maquinasContainer.innerHTML = ''; // Limpa o conteúdo antes de adicionar as máquinas

                maquinas.forEach(maquina => {
                    const maquinaElement = document.createElement('div');
                    // maquinaElement.classList.add('listaMaquinas'); 

                    maquinaElement.innerHTML += `
                <a href="dashEspecifica.html">
                    <div class="containerColTittle">
                        <span id="funcionario"> ${maquina.funcionario}</span>
                    <span id="idMaquina"> ${maquina.idzz_maquina}</span>
                    </div>
                </a>
            `;

                    maquinasContainer.appendChild(maquinaElement); // Adiciona a maquinaElement ao container de maquinas
                });
            })
            .catch(function (error) {
                console.error('Erro:', error);
            });
    }


</script>